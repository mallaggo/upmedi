{% extends "base.html" %}

{% block content %}
<div class="container py-4">
  <h2>{{ video.title }}</h2>
  <p>{{ video.description }}</p>
  <p><small>업로드: {{ video.created_at|date:"Y-m-d H:i" }}</small></p>

  {% if user.is_authenticated %}
    <video id="player" controls autoplay width="100%">
      <source src="{{ video.file.url }}" type="video/mp4">
    </video>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        showVideo(
          "{{ video.file.url }}",
          "{{ video.title|escapejs }}",
          "{{ video.description|escapejs }}",
          "{{ video.created_at|date:"Y-m-d H:i" }}"
        );
      });
    </script>
  {% else %}
    <p class="text-center">
      <a href="{% url 'who:login' %}">로그인</a> 후 영상을 보실 수 있습니다.
    </p>
  {% endif %}
</div>
{% endblock %}
